{"is_source_file": true, "format": "TypeScript", "description": "This file provides local storage utilities, demo data seed, and public API functions for managing menu items, cart, orders, and user authentication in a front-end food ordering web application.", "external_files": ["./types"], "external_methods": ["crypto.randomUUID", "localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "fetch"], "published": ["seedMenu", "getMenu", "searchMenu", "getCart", "addToCart", "updateCart", "clearCart", "placeOrder", "getOrders", "getUser", "login", "register", "logout", "apiBase"], "classes": [], "methods": [{"name": "export function seedMenu() { seedMenu", "description": "Seeds the local storage with demo menu items if none exist.", "scope": "", "scopeKind": ""}, {"name": "export function getMenu(): MenuItem[] { getMenu", "description": "Retrieves the menu items, ensuring seed data exists.", "scope": "", "scopeKind": ""}, {"name": "export function searchMenu(query: string, category?: string): MenuItem[] { searchMenu", "description": "Filters menu items based on a search query and optional category.", "scope": "", "scopeKind": ""}, {"name": "export function getCart(): CartItem[] { getCart", "description": "Gets the current cart items from local storage.", "scope": "", "scopeKind": ""}, {"name": "export function addToCart(item: MenuItem, qty = 1): CartItem[] { addToCart", "description": "Adds a menu item to the cart or increases its quantity.", "scope": "", "scopeKind": ""}, {"name": "export function updateCart(itemId: string, qty: number): CartItem[] { updateCart", "description": "Updates the quantity of a specific cart item.", "scope": "", "scopeKind": ""}, {"name": "export function clearCart() { clearCart", "description": "Empties the cart.", "scope": "", "scopeKind": ""}, {"name": "export function placeOrder(): Order { placeOrder", "description": "Creates an order from the current cart, stores it, and clears the cart.", "scope": "", "scopeKind": ""}, {"name": "export function getOrders(): Order[] { getOrders", "description": "Returns the list of orders from local storage.", "scope": "", "scopeKind": ""}, {"name": "export function getUser(): User | null { getUser", "description": "Returns the current logged-in user, if any.", "scope": "", "scopeKind": ""}, {"name": "export function login(payload: AuthPayload): User { login", "description": "Stores user info and simulates login.", "scope": "", "scopeKind": ""}, {"name": "export function register(payload: AuthPayload): User { register", "description": "Registers a new user, here same as login for demo.", "scope": "", "scopeKind": ""}, {"name": "export function logout() { logout", "description": "Logs out the current user.", "scope": "", "scopeKind": ""}, {"name": "async function api<T>(path: string, init?: RequestInit): Promise<T> { api", "description": "Helper to make API requests to backend, if configured.", "scope": "", "scopeKind": ""}, {"name": "function getLocal<T>(key: string, fallback: T): T { getLocal", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function setLocal<T>(key: string, value: T) { setLocal", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function uuid(): string { uuid", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "fetch", "crypto.randomUUID"], "search-terms": ["local storage seed menu", "cart management functions", "order placement", "menu filtering", "user authentication"], "state": 2, "file_id": 19, "knowledge_revision": 40, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^const API_BASE = (import.meta.env.PUBLIC_API_BASE as string | undefined) || '';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "KEYS", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^const KEYS = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "addToCart", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function addToCart(item: MenuItem, qty = 1): CartItem[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^async function api<T>(path: string, init?: RequestInit): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiBase", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export const apiBase = API_BASE;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "byCat", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^    const byCat = !category || category === 'All' || m.category === category;$/", "language": "TypeScript", "kind": "constant", "scope": "searchMenu", "scopeKind": "function"}, {"_type": "tag", "name": "byText", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^    const byText = !q || m.name.toLowerCase().includes(q) || m.description.toLowerCase().include/", "language": "TypeScript", "kind": "constant", "scope": "searchMenu", "scopeKind": "function"}, {"_type": "tag", "name": "cart", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const cart = getCart();$/", "language": "TypeScript", "kind": "constant", "scope": "addToCart", "scopeKind": "function"}, {"_type": "tag", "name": "cart", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const cart = getCart();$/", "language": "TypeScript", "kind": "constant", "scope": "placeOrder", "scopeKind": "function"}, {"_type": "tag", "name": "clearCart", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function clearCart() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "demo", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const demo: MenuItem[] = [$/", "language": "TypeScript", "kind": "constant", "scope": "seedMenu", "scopeKind": "function"}, {"_type": "tag", "name": "exists", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const exists = getLocal<MenuItem[]>(KEYS.MENU, []);$/", "language": "TypeScript", "kind": "constant", "scope": "seedMenu", "scopeKind": "function"}, {"_type": "tag", "name": "found", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const found = cart.find((c) => c.item.id === item.id);$/", "language": "TypeScript", "kind": "constant", "scope": "addToCart", "scopeKind": "function"}, {"_type": "tag", "name": "getCart", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function getCart(): CartItem[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getLocal", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^function getLocal<T>(key: string, fallback: T): T {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getMenu", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function getMenu(): MenuItem[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getOrders", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function getOrders(): Order[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getUser", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function getUser(): User | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function login(payload: AuthPayload): User {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function logout() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "order", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const order: Order = {$/", "language": "TypeScript", "kind": "constant", "scope": "placeOrder", "scopeKind": "function"}, {"_type": "tag", "name": "orders", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const orders = getLocal<Order[]>(KEYS.ORDERS, []);$/", "language": "TypeScript", "kind": "constant", "scope": "placeOrder", "scopeKind": "function"}, {"_type": "tag", "name": "placeOrder", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function placeOrder(): Order {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const q = query.trim().toLowerCase();$/", "language": "TypeScript", "kind": "constant", "scope": "searchMenu", "scopeKind": "function"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function register(payload: AuthPayload): User {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const res = await fetch(url, { ...init, headers: { 'Content-Type': 'application\\/json', ...(in/", "language": "TypeScript", "kind": "constant", "scope": "api", "scopeKind": "function"}, {"_type": "tag", "name": "searchMenu", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function searchMenu(query: string, category?: string): MenuItem[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "seedMenu", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function seedMenu() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "setLocal", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^function setLocal<T>(key: string, value: T) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "total", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const total = cart.reduce((sum, c) => sum + c.item.price * c.qty, 0);$/", "language": "TypeScript", "kind": "constant", "scope": "placeOrder", "scopeKind": "function"}, {"_type": "tag", "name": "updateCart", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^export function updateCart(itemId: string, qty: number): CartItem[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const url = API_BASE ? `${API_BASE}${path}` : path;$/", "language": "TypeScript", "kind": "constant", "scope": "api", "scopeKind": "function"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^  const user: User = {$/", "language": "TypeScript", "kind": "constant", "scope": "login", "scopeKind": "function"}, {"_type": "tag", "name": "uuid", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^function uuid(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "v", "path": "/home/kavia/workspace/code-generation/online-food-ordering-platform-14894-14903/food_website_frontend/src/lib/storage.ts", "pattern": "/^    const v = localStorage.getItem(key);$/", "language": "TypeScript", "kind": "constant", "scope": "getLocal", "scopeKind": "function"}], "hash": "881fa1d0d7d72118f15650fb5567773e", "format-version": 4, "code-base-name": "food_website_frontend", "filename": "food_website_frontend/src/lib/storage.ts", "revision_history": [{"40": ""}]}